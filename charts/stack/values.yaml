global:
  image:
    registry: ""

replicaCount: 1
imagePullSecrets: []
nameOverride: ""
fullnameOverride: ""

# =========================
# POSTGRES (HELM MANAGED)
# =========================
postgres:
  enabled: true
  image: postgres:15
  database: mydb
  username: admin
  password: admin
  port: 5432
  ssl: false

# =========================
# BACKEND
# =========================
backend:
  image:
    repository: nayna9/backend
    pullPolicy: Always
    tag: latest
  
  service:
    type: ClusterIP
    port: 1337

  env:
    DATABASE_HOST: stack-stack-postgres
    DATABASE_PORT: "5432"
    DATABASE_NAME: mydb
    DATABASE_USERNAME: admin
    DATABASE_PASSWORD: admin

  # HPA-like autoscaling (CPU-based)
  autoscaling:
    enabled: true
    minReplicas: 1
    maxReplicas: 3
    targetCPUUtilizationPercentage: 70  

  resources: {}

  ingress:
    enabled: true
    className: nginx
    annotations:
      kubernetes.io/ingress.class: nginx
    hosts:
      - host: backend.stack.local
        paths:
          - path: /
            pathType: ImplementationSpecific
    tls: []

  autoscaling:
    enabled: false
    minReplicas: 1
    maxReplicas: 10
    targetCPUUtilizationPercentage: 80

# =========================
# FRONTEND
# =========================
frontend:
  image:
    repository: nayna9/frontend
    pullPolicy: Always
    tag: latest
  
  service:
    type: LoadBalancer
    port: 80   # External port

  env:
    HOST: "0.0.0.0"      # Make Nuxt listen on all interfaces
    PORT: "3000"         # Container port

  resources: {}

  ingress:
    enabled: false

  autoscaling:
    enabled: false
    minReplicas: 1
    maxReplicas: 10
    targetCPUUtilizationPercentage: 80

# =========================
# COMMON
# =========================
serviceAccount:
  create: true
  annotations: {}
  name: ""

podAnnotations: {}

podSecurityContext: {}

securityContext: {}

nodeSelector: {}

tolerations: []

affinity: {}
